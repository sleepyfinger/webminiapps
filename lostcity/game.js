const storyElement = document.getElementById("story");
const choicesElement = document.getElementById("choices");

let gameEnded = false;
let currentChapterId = "0";
let previousOption = null;
let inventory = [];

class Option {
  constructor(text, nextChapterId, data = {}) {
    this.text = text;
    this.nextChapterId = nextChapterId;
    this.data = data;
  }
}

class Chapter {
  constructor(data) {
    this.text = data.text || "";
    this.dynamicText = data.dynamicText || null;
    this.options = data.options || [];
    this.dynamicOptions = data.dynamicOptions || null;
  }

  getDisplayText(selectedOption) {
    if (this.dynamicText) {
      return this.dynamicText(selectedOption?.data);
    }
    return this.text;
  }

  getDisplayOptions(selectedOption) {
    if (this.dynamicOptions) {
      return this.dynamicOptions(selectedOption?.data);
    }
    return this.options;
  }
}

function getChapter0() {
  return {
    text: "당신은 고대 유적을 탐험하는 탐험가입니다. 어느 날, 오래된 지도에서 전설 속 '잃어버린 도시' 아발론을 발견합니다. 이 도시는 단순한 전설이 아닌, 강력한 힘의 원천이라는 소문이 있습니다. 당신은 이 도시의 비밀을 풀기로 결심하고 모험을 시작합니다. 당신의 여정은 지금부터 시작됩니다. 당신은 어떤 준비를 하시겠습니까?",
    options: [
      {
        text: "지도를 확인하고 나침반을 챙긴다",
        nextChapterId: "1",
        data: { preparation: "지도와 나침반" },
      },
      {
        text: "배낭을 챙기고 물통을 채운다",
        nextChapterId: "1",
        data: { preparation: "배낭과 물통" },
      },
      {
        text: "도서관에서 아발론의 전설을 조사한다",
        nextChapterId: "1",
        data: { preparation: "전설 조사" },
      },
    ],
  };
}

function getChapter1() {
  return {
    dynamicText: (data) => {
      const commonText =
        " 숲의 입구에 도착한 당신. 숲은 울창하고 신비로운 기운이 감돕니다. 숲으로 들어서자, 두 갈래 길이 나타납니다. 하나는 좁고 어두운 길이고, 다른 하나는 넓고 밝은 길입니다. 어떤 길을 선택하시겠습니까?";
      switch (data.preparation) {
        case "지도와 나침반":
          return (
            "당신은 지도를 펼치고, 나침반을 확인한 후, 숲으로 향합니다. 지도는 오래되었지만, 여전히 유용해 보입니다. 나침반은 미세하게 떨리고 있습니다. 마치 무언가에 이끌리는 듯한 느낌입니다." +
            commonText
          );
        case "배낭과 물통":
          return (
            "당신은 배낭을 챙기고, 물통을 채우고, 튼튼한 신발을 신습니다. 준비를 마친 후, 숲으로 향합니다. 물통은 꽤 무겁지만, 든든합니다. 배낭 안에는 비상식량도 챙겨두었습니다." +
            commonText
          );
        case "전설 조사":
          return (
            "당신은 도서관으로 향하여, 잃어버린 도시 아발론에 대한 전설을 조사합니다. 고대 문명의 흔적, 보물, 그리고 위험한 함정에 대한 이야기가 가득합니다. 특히, 아발론의 수호자에 대한 이야기가 눈에 띕니다. 조사를 마친 후, 숲으로 향합니다. 전설은 당신의 호기심을 자극합니다." +
            commonText
          );
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    options: [
      {
        text: "좁고 어두운 길을 선택한다",
        nextChapterId: "2",
        data: { path: "어두운 길" },
      },
      {
        text: "넓고 밝은 길을 선택한다",
        nextChapterId: "2",
        data: { path: "밝은 길" },
      },
    ],
  };
}

function getChapter2() {
  return {
    dynamicText: (data) => {
      switch (data.path) {
        case "어두운 길":
          return "좁고 어두운 길을 선택한 당신은 숲 속으로 깊숙이 들어갑니다. 주변은 점점 어두워지고, 이상한 소리가 들려옵니다. 갑자기, 당신 앞에 낡은 나무 다리가 나타납니다. 다리는 삐걱거리고, 건너편은 안개에 가려져 있습니다. 다리를 건너는 것은 위험해 보이지만, 왠지 모르게 이끌리는 느낌입니다.";
        case "밝은 길":
          return "넓고 밝은 길을 선택한 당신은 숲 속을 걷습니다. 햇살이 나뭇잎 사이로 비추고, 새들의 지저귐이 들려옵니다. 길을 따라 걷던 중, 당신은 작은 오두막을 발견합니다. 오두막은 낡았지만, 연기가 피어오르고 있습니다. 오두막에는 누군가 살고 있는 것 같습니다. 하지만, 왠지 모르게 꺼림칙한 느낌이 듭니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.path) {
        case "어두운 길":
          return [
            {
              text: "다리를 건넌다",
              nextChapterId: "3",
              data: { action: "다리 건너기" },
            },
            {
              text: "다른 길을 찾아본다",
              nextChapterId: "3",
              data: { action: "다른 길 찾기" },
            },
          ];
        case "밝은 길":
          return [
            {
              text: "오두막으로 가본다",
              nextChapterId: "3",
              data: { action: "오두막 방문" },
            },
            {
              text: "길을 계속 간다",
              nextChapterId: "3",
              data: { action: "길 따라가기" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter3() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "다리 건너기":
          return "삐걱거리는 다리를 건너기로 결심한 당신. 다리는 불안정하게 흔들리고, 아래는 깊은 계곡입니다. 다리를 건너는 도중, 다리 일부가 부서지기 시작합니다. 당신은 간신히 반대편에 도착하지만, 다리는 완전히 무너져 버립니다. 이제 돌아갈 수 없습니다. 당신의 앞에는 숲이 펼쳐져 있습니다. 숲은 더욱 어두워 보이고, 묘한 기운이 감돕니다. 숲에서 이상한 소리가 들려옵니다.";
        case "다른 길 찾기":
          return "다른 길을 찾아보기로 한 당신은 숲 속을 헤매기 시작합니다. 길을 잃은 듯한 느낌이 들고, 시간은 점점 흐릅니다. 그러다, 당신은 숲 속에서 빛나는 무언가를 발견합니다. 그것은 고대 유적의 일부처럼 보입니다. 유적은 신비로운 빛을 발하고 있습니다. 하지만, 그 빛은 왠지 모르게 당신을 불안하게 만듭니다.";
        case "오두막 방문":
          return "오두막으로 향한 당신은 문을 두드립니다. 잠시 후, 문이 열리고, 늙은 여인이 나타납니다. 여인은 당신을 안으로 초대하고, 따뜻한 차를 대접합니다. 여인은 아발론에 대한 전설을 알고 있는 듯합니다. 여인의 눈빛은 예사롭지 않습니다. 여인은 당신에게 무언가를 숨기고 있는 듯합니다.";
        case "길 따라가기":
          return "길을 계속 가기로 한 당신은 숲 속을 걷습니다. 길은 점점 좁아지고, 주변은 빽빽한 숲으로 둘러싸입니다. 그러다, 당신은 길 한가운데에 놓인 이상한 돌을 발견합니다. 돌에는 알 수 없는 문양이 새겨져 있습니다. 돌은 차가운 기운을 내뿜고 있습니다. 돌은 마치 살아있는 듯한 느낌을 줍니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "다리 건너기":
          return [
            {
              text: "숲으로 들어간다",
              nextChapterId: "4",
              data: { action: "숲 진입" },
            },
          ];
        case "다른 길 찾기":
          return [
            {
              text: "빛나는 유적을 조사한다",
              nextChapterId: "4",
              data: { action: "유적 조사" },
            },
            {
              text: "길을 계속 찾아본다",
              nextChapterId: "4",
              data: { action: "길 찾기 계속" },
            },
          ];
        case "오두막 방문":
          return [
            {
              text: "여인에게 아발론에 대해 묻는다",
              nextChapterId: "4",
              data: { action: "여인에게 질문" },
            },
            {
              text: "여인과 차를 마시며 휴식을 취한다",
              nextChapterId: "4",
              data: { action: "여인과 휴식" },
            },
          ];
        case "길 따라가기":
          return [
            {
              text: "돌을 조사한다",
              nextChapterId: "4",
              data: { action: "돌 조사" },
            },
            {
              text: "돌을 무시하고 길을 계속 간다",
              nextChapterId: "4",
              data: { action: "돌 무시" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter4() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "숲 진입":
          return "무너진 다리를 뒤로하고 숲으로 들어간 당신. 숲은 울창하고, 길은 험난합니다. 숲 속을 헤쳐나가던 중, 당신은 오래된 동굴 입구를 발견합니다. 동굴 안에서는 희미한 빛이 새어 나오고 있습니다. 동굴은 깊고 어두워 보입니다. 동굴에서 묘한 기운이 느껴집니다.";
        case "유적 조사":
          return "빛나는 유적을 조사하기로 한 당신. 유적은 고대의 문자로 뒤덮여 있고, 중앙에는 제단이 있습니다. 제단 위에는 빛나는 보석이 놓여 있습니다. 보석은 신비로운 힘을 발산하는 듯합니다. 보석은 당신의 눈을 사로잡습니다. 보석에서 강렬한 에너지가 느껴집니다.";
        case "길 찾기 계속":
          return "길을 계속 찾아보기로 한 당신은 숲 속을 헤매입니다. 숲은 점점 더 깊어지고, 길은 더욱 험난해집니다. 그러다, 당신은 숲 속에서 맑은 물이 흐르는 작은 개울을 발견합니다. 개울은 시원한 기운을 내뿜고 있습니다. 하지만, 개울 주변의 식물들은 왠지 모르게 시들어 보입니다.";
        case "여인에게 질문":
          return "여인에게 아발론에 대해 묻자, 여인은 오래된 이야기를 들려줍니다. 도시는 강력한 마법으로 보호받고 있으며, 진정한 용기 있는 자만이 그곳에 도달할 수 있다고 합니다. 여인은 당신에게 작은 부적을 건네줍니다. 부적은 따뜻한 기운을 내뿜고 있습니다. 하지만, 여인의 눈빛은 어딘가 슬퍼 보입니다.";
        case "여인과 휴식":
          return "여인과 함께 차를 마시며 휴식을 취한 당신. 여인은 당신에게 따뜻한 위로와 격려를 해줍니다. 휴식을 취한 후, 당신은 다시 숲으로 향합니다. 여인은 당신의 여정에 행운을 빌어줍니다. 여인의 미소는 따뜻하지만, 어딘가 불안해 보입니다.";
        case "돌 조사":
          return "이상한 돌을 조사하기로 한 당신. 돌에 새겨진 문양은 고대의 언어로 보입니다. 문양을 자세히 살펴보던 중, 돌이 빛나기 시작합니다. 돌에서 강력한 에너지가 방출됩니다. 돌은 뜨거운 기운을 내뿜고 있습니다. 돌은 마치 당신을 시험하는 듯합니다.";
        case "돌 무시":
          return "돌을 무시하고 길을 계속 가기로 한 당신. 숲은 점점 더 어두워지고, 길은 험난해집니다. 그러다, 당신은 숲 속에서 이상한 소리를 듣습니다. 소리는 점점 가까워지는 듯합니다. 소리는 섬뜩하게 들립니다. 소리는 마치 당신을 유혹하는 듯합니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "숲 진입":
          return [
            {
              text: "동굴로 들어간다",
              nextChapterId: "5",
              data: { action: "동굴 진입" },
            },
            {
              text: "다른 길을 찾아본다",
              nextChapterId: "5",
              data: { action: "다른 길 찾기" },
            },
          ];
        case "유적 조사":
          return [
            {
              text: "보석을 가져간다",
              nextChapterId: "5",
              data: { action: "보석 획득" },
            },
            {
              text: "유적을 더 조사한다",
              nextChapterId: "5",
              data: { action: "유적 심층 조사" },
            },
          ];
        case "길 찾기 계속":
          return [
            {
              text: "개울을 따라간다",
              nextChapterId: "5",
              data: { action: "개울 따라가기" },
            },
            {
              text: "숲 속을 계속 헤맨다",
              nextChapterId: "5",
              data: { action: "숲 헤매기" },
            },
          ];
        case "여인에게 질문":
          return [
            {
              text: "부적을 받고 숲으로 향한다",
              nextChapterId: "5",
              data: { action: "부적 획득" },
            },
            {
              text: "여인에게 더 많은 이야기를 듣는다",
              nextChapterId: "5",
              data: { action: "여인과 대화" },
            },
          ];
        case "여인과 휴식":
          return [
            {
              text: "숲으로 향한다",
              nextChapterId: "5",
              data: { action: "숲으로" },
            },
          ];
        case "돌 조사":
          return [
            {
              text: "돌을 계속 조사한다",
              nextChapterId: "5",
              data: { action: "돌 심층 조사" },
            },
            {
              text: "돌에서 물러난다",
              nextChapterId: "5",
              data: { action: "돌 회피" },
            },
          ];
        case "돌 무시":
          return [
            {
              text: "소리의 근원을 찾아본다",
              nextChapterId: "5",
              data: { action: "소리 추적" },
            },
            {
              text: "소리를 무시하고 길을 계속 간다",
              nextChapterId: "5",
              data: { action: "소리 무시" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter5() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "동굴 진입":
          return "동굴 안으로 들어간 당신. 동굴은 어둡고 습하며, 알 수 없는 소리가 울려 퍼집니다. 횃불을 밝히고 조심스럽게 나아가던 중, 당신은 동굴 벽에 새겨진 고대 문자를 발견합니다. 문자는 아발론에 대한 단서를 담고 있는 듯합니다. 문자는 신비로운 기운을 내뿜고 있습니다. 하지만, 문자는 어딘가 불안정해 보입니다.";
        case "다른 길 찾기":
          return "다른 길을 찾아보기로 한 당신은 숲 속을 헤매입니다. 숲은 점점 더 깊어지고, 길은 더욱 험난해집니다. 그러다, 당신은 숲 속에서 오래된 우물을 발견합니다. 우물 안에서는 희미한 빛이 새어 나오고 있습니다. 우물은 깊고 어두워 보입니다. 우물에서 묘한 기운이 느껴집니다.";
        case "보석 획득":
          inventory.push("빛나는 보석");
          return "제단 위의 보석을 가져가기로 한 당신. 보석을 손에 쥐는 순간, 강력한 에너지가 당신을 감쌉니다. 보석은 당신에게 특별한 힘을 부여하는 듯합니다. 하지만, 동시에 유적이 흔들리기 시작합니다. 유적은 무너질 듯 흔들립니다. 보석은 당신에게 위험한 힘을 준 것 같습니다.";
        case "유적 심층 조사":
          return "유적을 더 조사하기로 한 당신. 유적 곳곳을 탐험하던 중, 당신은 숨겨진 방을 발견합니다. 방 안에는 고대의 책들이 가득하고, 그 중 한 권에는 아발론에 대한 자세한 기록이 담겨 있습니다. 책은 오래되었지만, 여전히 읽을 수 있습니다. 책에서 묘한 기운이 느껴집니다.";
        case "개울 따라가기":
          return "개울을 따라가기로 한 당신. 개울은 숲 속 깊은 곳으로 이어져 있습니다. 개울을 따라 걷던 중, 당신은 작은 폭포를 발견합니다. 폭포 뒤에는 동굴 입구가 숨겨져 있습니다. 폭포는 시원한 물줄기를 뿜어내고 있습니다. 하지만, 폭포 주변의 식물들은 왠지 모르게 시들어 보입니다.";
        case "숲 헤매기":
          return "숲 속을 계속 헤매기로 한 당신. 숲은 점점 더 어두워지고, 길은 더욱 험난해집니다. 그러다, 당신은 숲 속에서 이상한 빛을 발견합니다. 빛은 점점 가까워지는 듯합니다. 빛은 신비로운 기운을 내뿜고 있습니다. 하지만, 빛은 어딘가 불안정해 보입니다.";
        case "부적 획득":
          inventory.push("여인의 부적");
          return "여인이 건네준 부적을 받고 숲으로 향한 당신. 부적은 당신에게 행운을 가져다주는 듯합니다. 숲 속을 걷던 중, 당신은 아발론에 대한 표지판을 발견합니다. 표지판은 오래되었지만, 여전히 알아볼 수 있습니다. 부적에서 따뜻한 기운이 느껴집니다.";
        case "여인과 대화":
          return "여인에게 더 많은 이야기를 듣기로 한 당신. 여인은 아발론에 대한 더 자세한 이야기를 들려줍니다. 여인은 당신에게 특별한 지혜를 전해주고, 당신의 여정에 행운을 빌어줍니다. 여인의 이야기는 흥미롭습니다. 하지만, 여인의 눈빛은 어딘가 슬퍼 보입니다.";
        case "숲으로":
          return "여인과 작별 인사를 하고 숲으로 향한 당신. 숲은 여전히 신비롭고, 길은 험난합니다. 숲 속을 걷던 중, 당신은 아발론에 대한 표지판을 발견합니다. 표지판은 오래되었지만, 여전히 알아볼 수 있습니다. 숲에서 묘한 기운이 느껴집니다.";
        case "돌 심층 조사":
          return "돌을 계속 조사하기로 한 당신. 돌은 점점 더 강하게 빛나기 시작합니다. 돌에서 방출되는 에너지는 당신에게 고대의 지식을 전해주는 듯합니다. 하지만, 동시에 숲이 흔들리기 시작합니다. 숲은 불안정하게 흔들립니다. 돌은 당신에게 위험한 힘을 준 것 같습니다.";
        case "돌 회피":
          return "돌에서 물러나기로 한 당신. 돌은 여전히 빛나고 있지만, 당신은 안전한 거리를 유지합니다. 숲 속을 걷던 중, 당신은 아발론에 대한 표지판을 발견합니다. 표지판은 오래되었지만, 여전히 알아볼 수 있습니다. 숲에서 묘한 기운이 느껴집니다.";
        case "소리 추적":
          return "소리의 근원을 찾아보기로 한 당신. 소리는 점점 더 가까워지고, 당신은 소리의 근원을 향해 나아갑니다. 소리의 근처에서 당신은 아발론에 대한 표지판을 발견합니다. 표지판은 오래되었지만, 여전히 알아볼 수 있습니다. 소리는 마치 당신을 유혹하는 듯합니다.";
        case "소리 무시":
          return "소리를 무시하고 길을 계속 가기로 한 당신. 숲은 점점 더 어두워지고, 길은 험난해집니다. 숲 속을 걷던 중, 당신은 아발론에 대한 표지판을 발견합니다. 표지판은 오래되었지만, 여전히 알아볼 수 있습니다. 숲에서 묘한 기운이 느껴집니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "동굴 진입":
          return [
            {
              text: "문자를 해독해본다",
              nextChapterId: "6",
              data: { action: "문자 해독" },
            },
            {
              text: "동굴을 더 탐험한다",
              nextChapterId: "6",
              data: { action: "동굴 탐험" },
            },
          ];
        case "다른 길 찾기":
          return [
            {
              text: "우물 안을 들여다본다",
              nextChapterId: "6",
              data: { action: "우물 조사" },
            },
            {
              text: "숲 속을 더 헤맨다",
              nextChapterId: "6",
              data: { action: "숲 헤매기" },
            },
          ];
        case "보석 획득":
          return [
            {
              text: "유적에서 탈출한다",
              nextChapterId: "6",
              data: { action: "유적 탈출" },
            },
            {
              text: "유적을 더 조사한다",
              nextChapterId: "6",
              data: { action: "유적 심층 조사" },
            },
          ];
        case "유적 심층 조사":
          return [
            {
              text: "책을 읽어본다",
              nextChapterId: "6",
              data: { action: "책 읽기" },
            },
            {
              text: "방을 더 조사한다",
              nextChapterId: "6",
              data: { action: "방 조사" },
            },
          ];
        case "개울 따라가기":
          return [
            {
              text: "폭포 뒤 동굴로 들어간다",
              nextChapterId: "6",
              data: { action: "동굴 진입" },
            },
            {
              text: "개울을 더 따라간다",
              nextChapterId: "6",
              data: { action: "개울 따라가기" },
            },
          ];
        case "숲 헤매기":
          return [
            {
              text: "빛을 따라간다",
              nextChapterId: "6",
              data: { action: "빛 추적" },
            },
            {
              text: "숲 속을 더 헤맨다",
              nextChapterId: "6",
              data: { action: "숲 헤매기" },
            },
          ];
        case "부적 획득":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "6",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "숲 속을 더 탐험한다",
              nextChapterId: "6",
              data: { action: "숲 탐험" },
            },
          ];
        case "여인과 대화":
          return [
            {
              text: "여인에게 작별 인사를 한다",
              nextChapterId: "6",
              data: { action: "작별 인사" },
            },
            {
              text: "여인에게 더 많은 이야기를 듣는다",
              nextChapterId: "6",
              data: { action: "여인과 대화" },
            },
          ];
        case "숲으로":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "6",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "숲 속을 더 탐험한다",
              nextChapterId: "6",
              data: { action: "숲 탐험" },
            },
          ];
        case "돌 심층 조사":
          return [
            {
              text: "돌의 힘을 받아들인다",
              nextChapterId: "6",
              data: { action: "돌 힘 수용" },
            },
            {
              text: "돌에서 물러난다",
              nextChapterId: "6",
              data: { action: "돌 회피" },
            },
          ];
        case "돌 회피":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "6",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "숲 속을 더 탐험한다",
              nextChapterId: "6",
              data: { action: "숲 탐험" },
            },
          ];
        case "소리 추적":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "6",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "소리의 근원을 더 추적한다",
              nextChapterId: "6",
              data: { action: "소리 추적" },
            },
          ];
        case "소리 무시":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "6",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "숲 속을 더 탐험한다",
              nextChapterId: "6",
              data: { action: "숲 탐험" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter6() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "문자 해독":
          return "당신은 동굴 벽에 새겨진 고대 문자를 해독하기 시작합니다. 문자는 아발론에 대한 전설과 그 위치를 암시하는 지도를 담고 있습니다. 해독을 마친 당신은 아발론으로 향하는 길을 알게 됩니다. 문자는 당신에게 지혜를 전해줍니다. 하지만, 문자는 어딘가 불안정해 보입니다. 갑자기, 동굴 전체가 흔들리기 시작합니다! 동굴이 무너질 것 같습니다!";
        case "동굴 탐험":
          return "당신은 동굴을 더 깊이 탐험하기로 결심합니다. 동굴은 미로처럼 복잡하게 얽혀 있고, 곳곳에 함정이 숨겨져 있습니다. 조심스럽게 탐험하던 중, 당신은 아발론으로 향하는 비밀 통로를 발견합니다. 통로는 어둡고 깊어 보입니다. 통로에서 묘한 기운이 느껴집니다. 하지만, 통로 입구에 거대한 거미줄이 쳐져 있습니다!";
        case "우물 조사":
          return "당신은 우물 안을 들여다봅니다. 우물 안은 깊고 어둡지만, 바닥에서 희미한 빛이 새어 나오고 있습니다. 우물 안으로 내려가기로 결심한 당신은 조심스럽게 밧줄을 타고 내려갑니다. 우물 바닥에서 당신은 아발론으로 향하는 지하 통로를 발견합니다. 통로는 차가운 기운을 내뿜고 있습니다. 통로에서 묘한 기운이 느껴집니다. 하지만, 우물 바닥에서 무언가 꿈틀거리는 것이 보입니다!";
        case "숲 헤매기":
          return "당신은 숲 속을 더 헤매기로 결심합니다. 숲은 점점 더 어두워지고, 길은 더욱 험난해집니다. 그러다, 당신은 숲 속에서 이상한 구조물을 발견합니다. 구조물은 아발론으로 향하는 표지판처럼 보입니다. 구조물은 신비로운 기운을 내뿜고 있습니다. 하지만, 구조물은 어딘가 불안정해 보입니다. 갑자기, 구조물이 강렬한 빛을 내뿜으며 폭발합니다!";
        case "유적 탈출":
          return "당신은 유적에서 탈출하기로 결심합니다. 유적은 점점 더 심하게 흔들리고, 무너질 위험이 있습니다. 간신히 유적을 빠져나온 당신은 숲 속에서 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 유적에서 위험한 기운이 느껴집니다. 하지만, 유적에서 탈출한 당신은 숲 속에서 길을 잃은 것 같습니다.";
        case "유적 심층 조사":
          return "당신은 유적을 더 조사하기로 결심합니다. 유적 곳곳을 탐험하던 중, 당신은 숨겨진 방을 발견합니다. 방 안에는 고대의 장치가 놓여 있고, 장치는 아발론으로 향하는 문을 여는 열쇠처럼 보입니다. 장치는 신비로운 빛을 발하고 있습니다. 장치에서 묘한 기운이 느껴집니다. 하지만, 장치를 작동시키려는 순간, 방 전체가 흔들리기 시작합니다!";
        case "책 읽기":
          return "당신은 책을 읽어보기로 결심합니다. 책에는 아발론에 대한 자세한 기록과 그 위치를 암시하는 지도가 담겨 있습니다. 책을 다 읽은 당신은 아발론으로 향하는 길을 알게 됩니다. 책은 당신에게 지혜를 전해줍니다. 하지만, 책은 어딘가 불안정해 보입니다. 갑자기, 책이 타오르기 시작합니다!";
        case "방 조사":
          return "당신은 방을 더 조사하기로 결심합니다. 방 곳곳을 탐험하던 중, 당신은 숨겨진 통로를 발견합니다. 통로는 아발론으로 향하는 길처럼 보입니다. 통로는 어둡고 깊어 보입니다. 통로에서 묘한 기운이 느껴집니다. 하지만, 통로 입구에서 무언가 으르렁거리는 소리가 들립니다!";
        case "동굴 진입":
          return "당신은 폭포 뒤 동굴로 들어가기로 결심합니다. 동굴은 어둡고 습하며, 알 수 없는 소리가 울려 퍼집니다. 조심스럽게 나아가던 중, 당신은 동굴 벽에 새겨진 고대 문자를 발견합니다. 문자는 아발론에 대한 단서를 담고 있는 듯합니다. 문자는 신비로운 기운을 내뿜고 있습니다. 하지만, 문자는 어딘가 불안정해 보입니다. 갑자기, 동굴 안에서 거대한 그림자가 나타납니다!";
        case "개울 따라가기":
          return "당신은 개울을 더 따라가기로 결심합니다. 개울은 숲 속 깊은 곳으로 이어져 있습니다. 개울을 따라 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 개울에서 묘한 기운이 느껴집니다. 하지만, 개울 물이 갑자기 붉게 변하기 시작합니다!";
        case "빛 추적":
          return "당신은 빛을 따라가기로 결심합니다. 빛은 점점 더 강해지고, 당신은 빛의 근원을 향해 나아갑니다. 빛의 근처에서 당신은 아발론으로 향하는 길을 발견합니다. 빛은 신비로운 기운을 내뿜고 있습니다. 하지만, 빛은 어딘가 불안정해 보입니다. 갑자기, 빛이 폭발하며 당신을 덮칩니다!";
        case "숲 탐험":
          return "당신은 숲 속을 더 탐험하기로 결심합니다. 숲은 여전히 신비롭고, 길은 험난합니다. 숲 속을 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 숲에서 묘한 기운이 느껴집니다. 하지만, 숲 속에서 무언가 당신을 지켜보는 듯한 느낌이 듭니다!";
        case "표지판 따라가기":
          return "당신은 표지판을 따라가기로 결심합니다. 표지판은 숲 속 깊은 곳으로 이어져 있습니다. 표지판을 따라 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 표지판에서 묘한 기운이 느껴집니다. 하지만, 표지판이 갑자기 사라집니다!";
        case "작별 인사":
          return "당신은 여인에게 작별 인사를 하고 숲으로 향합니다. 여인은 당신의 여정에 행운을 빌어줍니다. 숲 속을 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 여인에게서 묘한 기운이 느껴집니다. 하지만, 여인의 모습이 갑자기 사라집니다!";
        case "여인과 대화":
          return "당신은 여인에게 더 많은 이야기를 듣기로 결심합니다. 여인은 아발론에 대한 더 자세한 이야기를 들려줍니다. 여인은 당신에게 특별한 지혜를 전해주고, 당신의 여정에 행운을 빌어줍니다. 여인과 작별 인사를 하고 숲으로 향합니다. 숲 속을 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 여인에게서 묘한 기운이 느껴집니다. 하지만, 여인의 눈빛이 갑자기 차갑게 변합니다!";
        case "돌 힘 수용":
          return "당신은 돌의 힘을 받아들이기로 결심합니다. 돌에서 방출되는 강력한 에너지가 당신의 몸을 감쌉니다. 당신은 고대의 지혜와 힘을 얻게 됩니다. 숲 속을 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 돌에서 위험한 기운이 느껴집니다. 하지만, 당신의 몸이 돌처럼 굳어가는 것을 느낍니다!";
        case "돌 회피":
          return "당신은 돌에서 물러나기로 결심합니다. 돌은 여전히 빛나고 있지만, 당신은 안전한 거리를 유지합니다. 숲 속을 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 숲에서 묘한 기운이 느껴집니다. 하지만, 돌이 당신을 향해 날아옵니다!";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "문자 해독":
          return [
            {
              text: "무너지는 동굴에서 탈출한다",
              nextChapterId: "7",
              data: { action: "동굴 탈출" },
            },
          ];
        case "동굴 탐험":
          return [
            {
              text: "거미줄을 뚫고 통로로 들어간다",
              nextChapterId: "7",
              data: { action: "거미줄 돌파" },
            },
            {
              text: "다른 길을 찾아본다",
              nextChapterId: "7",
              data: { action: "다른 길 찾기" },
            },
          ];
        case "우물 조사":
          return [
            {
              text: "우물 바닥의 무언가를 확인한다",
              nextChapterId: "7",
              data: { action: "우물 바닥 확인" },
            },
            {
              text: "다시 우물 위로 올라간다",
              nextChapterId: "7",
              data: { action: "우물 탈출" },
            },
          ];
        case "숲 헤매기":
          return [
            {
              text: "폭발의 여파에서 벗어난다",
              nextChapterId: "7",
              data: { action: "폭발 회피" },
            },
          ];
        case "유적 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "7",
              data: { action: "길 찾기" },
            },
          ];
        case "유적 심층 조사":
          return [
            {
              text: "장치를 작동시킨다",
              nextChapterId: "7",
              data: { action: "장치 작동" },
            },
            {
              text: "방에서 탈출한다",
              nextChapterId: "7",
              data: { action: "방 탈출" },
            },
          ];
        case "책 읽기":
          return [
            {
              text: "타오르는 책을 끈다",
              nextChapterId: "7",
              data: { action: "책 끄기" },
            },
            {
              text: "책을 버리고 도망친다",
              nextChapterId: "7",
              data: { action: "책 버리기" },
            },
          ];
        case "방 조사":
          return [
            {
              text: "통로로 들어간다",
              nextChapterId: "7",
              data: { action: "통로 진입" },
            },
            {
              text: "방에서 나간다",
              nextChapterId: "7",
              data: { action: "방 탈출" },
            },
          ];
        case "동굴 진입":
          return [
            {
              text: "그림자와 싸운다",
              nextChapterId: "7",
              data: { action: "그림자와 전투" },
            },
            {
              text: "동굴에서 도망친다",
              nextChapterId: "7",
              data: { action: "동굴 탈출" },
            },
          ];
        case "개울 따라가기":
          return [
            {
              text: "붉은 물을 조사한다",
              nextChapterId: "7",
              data: { action: "붉은 물 조사" },
            },
            {
              text: "개울에서 벗어난다",
              nextChapterId: "7",
              data: { action: "개울 탈출" },
            },
          ];
        case "빛 추적":
          return [
            {
              text: "빛의 폭발에서 벗어난다",
              nextChapterId: "7",
              data: { action: "폭발 회피" },
            },
          ];
        case "숲 탐험":
          return [
            {
              text: "무언가의 정체를 확인한다",
              nextChapterId: "7",
              data: { action: "정체 확인" },
            },
            {
              text: "숲에서 도망친다",
              nextChapterId: "7",
              data: { action: "숲 탈출" },
            },
          ];
        case "표지판 따라가기":
          return [
            {
              text: "사라진 표지판을 찾는다",
              nextChapterId: "7",
              data: { action: "표지판 찾기" },
            },
          ];
        case "작별 인사":
          return [
            {
              text: "사라진 여인을 찾는다",
              nextChapterId: "7",
              data: { action: "여인 찾기" },
            },
          ];
        case "여인과 대화":
          return [
            {
              text: "여인의 정체를 묻는다",
              nextChapterId: "7",
              data: { action: "여인 정체 질문" },
            },
          ];
        case "돌 힘 수용":
          return [
            {
              text: "돌의 힘을 거부한다",
              nextChapterId: "7",
              data: { action: "돌 힘 거부" },
            },
          ];
        case "돌 회피":
          return [
            {
              text: "날아오는 돌을 피한다",
              nextChapterId: "7",
              data: { action: "돌 피하기" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter7() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "동굴 탈출":
          return "무너지는 동굴에서 필사적으로 탈출한 당신. 간신히 동굴 밖으로 빠져나왔지만, 동굴은 완전히 무너져 버렸습니다. 당신은 숲 속에서 길을 잃은 채, 아발론으로 향하는 길을 다시 찾아야 합니다. 숲은 여전히 묘한 기운이 감돌고 있습니다.";
        case "거미줄 돌파":
          return "당신은 용기를 내어 거미줄을 뚫고 통로로 들어갑니다. 통로는 어둡고 좁으며, 끈적끈적한 거미줄이 온통 뒤덮고 있습니다. 통로를 따라 걷던 중, 당신은 거대한 거미와 마주칩니다! 거미는 당신을 공격하려 합니다.";
        case "다른 길 찾기":
          return "당신은 거미줄이 쳐진 통로를 포기하고 다른 길을 찾아보기로 합니다. 동굴 안을 헤매던 중, 당신은 또 다른 통로를 발견합니다. 이 통로는 왠지 모르게 더 위험해 보입니다. 통로에서 묘한 기운이 느껴집니다.";
        case "우물 바닥 확인":
          return "당신은 우물 바닥에서 꿈틀거리는 무언가를 확인하기로 합니다. 조심스럽게 다가가 보니, 그것은 거대한 지렁이였습니다! 지렁이는 당신을 발견하고 공격하려 합니다.";
        case "우물 탈출":
          return "당신은 우물 바닥의 위험을 감지하고, 다시 우물 위로 올라가기로 합니다. 밧줄을 타고 필사적으로 올라가던 중, 밧줄이 끊어지기 시작합니다! 당신은 추락할 위기에 처합니다.";
        case "폭발 회피":
          return "당신은 재빨리 몸을 날려 폭발의 여파에서 벗어납니다. 폭발은 숲을 뒤흔들고, 당신은 간신히 살아남았습니다. 하지만, 폭발로 인해 숲은 더욱 혼란스러워졌고, 당신은 길을 잃은 것 같습니다.";
        case "길 찾기":
          return "당신은 숲에서 길을 찾기 위해 노력합니다. 숲은 여전히 묘한 기운이 감돌고, 길을 찾기가 쉽지 않습니다. 그러다, 당신은 숲 속에서 희미하게 빛나는 무언가를 발견합니다. 그것은 아발론으로 향하는 길을 알려주는 표지판처럼 보입니다.";
        case "장치 작동":
          return "당신은 고대의 장치를 작동시키기로 결심합니다. 장치를 작동시키는 순간, 방 전체가 강렬한 빛으로 가득 차고, 방의 벽이 열리며 새로운 통로가 나타납니다. 통로는 아발론으로 향하는 길처럼 보입니다. 하지만, 장치가 과부하되어 폭발할 것 같습니다!";
        case "방 탈출":
          return "당신은 장치의 위험을 감지하고, 방에서 탈출하기로 합니다. 방을 빠져나온 당신은 숲 속에서 길을 잃은 것 같습니다. 숲은 여전히 묘한 기운이 감돌고 있습니다.";
        case "책 끄기":
          return "당신은 타오르는 책을 끄기 위해 노력합니다. 책은 뜨겁게 타오르고, 당신은 화상을 입을 위험에 처합니다. 간신히 책을 끄는 데 성공했지만, 책은 완전히 재로 변해 버렸습니다. 책에 담겨 있던 아발론에 대한 정보는 모두 사라졌습니다.";
        case "책 버리기":
          return "당신은 타오르는 책을 버리고 도망치기로 합니다. 책은 숲 속에서 계속 타오르고, 숲에 불이 번질 위험이 있습니다. 당신은 책을 버리고 도망쳤지만, 아발론에 대한 정보는 모두 사라졌습니다.";
        case "통로 진입":
          return "당신은 통로로 들어가기로 결심합니다. 통로는 어둡고 좁으며, 으르렁거리는 소리가 점점 더 크게 들려옵니다. 통로를 따라 걷던 중, 당신은 늑대인간과 마주칩니다! 늑대인간은 당신을 공격하려 합니다.";
        case "방 탈출":
          return "당신은 통로의 위험을 감지하고, 방에서 탈출하기로 합니다. 방을 빠져나온 당신은 숲 속에서 길을 잃은 것 같습니다. 숲은 여전히 묘한 기운이 감돌고 있습니다.";
        case "그림자와 전투":
          return "당신은 동굴 안에서 나타난 거대한 그림자와 싸우기로 결심합니다. 그림자는 강력한 힘을 가지고 있고, 당신은 위험에 처합니다. 그림자와의 전투는 치열하게 전개됩니다.";
        case "동굴 탈출":
          return "당신은 그림자와의 싸움을 포기하고, 동굴에서 도망치기로 합니다. 동굴을 빠져나온 당신은 숲 속에서 길을 잃은 것 같습니다. 숲은 여전히 묘한 기운이 감돌고 있습니다.";
        case "붉은 물 조사":
          return "당신은 붉게 변한 개울 물을 조사하기로 합니다. 물에 손을 담그는 순간, 당신의 손이 타는 듯한 고통을 느낍니다. 물은 강한 독성을 가지고 있는 것 같습니다. 당신은 위험에 처합니다.";
        case "개울 탈출":
          return "당신은 붉은 물의 위험을 감지하고, 개울에서 벗어나기로 합니다. 개울에서 벗어난 당신은 숲 속에서 길을 잃은 것 같습니다. 숲은 여전히 묘한 기운이 감돌고 있습니다.";
        case "폭발 회피":
          return "당신은 재빨리 몸을 날려 빛의 폭발에서 벗어납니다. 폭발은 당신을 덮치지 않았지만, 당신은 큰 충격을 받았습니다. 당신은 숲 속에서 길을 잃은 것 같습니다.";
        case "정체 확인":
          return "당신은 숲 속에서 당신을 지켜보는 무언가의 정체를 확인하기로 합니다. 조심스럽게 다가가 보니, 그것은 숲의 수호자였습니다! 수호자는 당신을 공격하려 합니다.";
        case "숲 탈출":
          return "당신은 숲 속에서 당신을 지켜보는 무언가의 위험을 감지하고, 숲에서 도망치기로 합니다. 숲을 빠져나온 당신은 길을 잃은 것 같습니다. 숲은 여전히 묘한 기운이 감돌고 있습니다.";
        case "표지판 찾기":
          return "당신은 사라진 표지판을 찾기 위해 노력합니다. 숲 속을 헤매던 중, 당신은 표지판의 흔적을 발견합니다. 표지판은 숲 속 깊은 곳으로 이어져 있는 것 같습니다.";
        case "여인 찾기":
          return "당신은 사라진 여인을 찾기 위해 노력합니다. 숲 속을 헤매던 중, 당신은 여인의 흔적을 발견합니다. 여인은 숲 속 깊은 곳으로 사라진 것 같습니다.";
        case "여인 정체 질문":
          return "당신은 여인의 정체를 묻기로 결심합니다. 여인은 갑자기 차가운 눈빛으로 당신을 바라보며, 자신의 정체를 밝힙니다. 그녀는 아발론의 수호자였습니다! 수호자는 당신을 공격하려 합니다.";
        case "돌 힘 거부":
          return "당신은 돌의 힘을 거부하기로 결심합니다. 돌은 당신에게서 멀어지고, 당신은 다시 자유로워집니다. 하지만, 돌은 분노하여 당신을 공격하려 합니다.";
        case "돌 피하기":
          return "당신은 날아오는 돌을 피하기 위해 노력합니다. 돌은 당신을 향해 빠르게 날아오고, 당신은 위험에 처합니다. 간신히 돌을 피하는 데 성공했지만, 당신은 숲 속에서 길을 잃은 것 같습니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "동굴 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "거미줄 돌파":
          return [
            {
              text: "거미와 싸운다",
              nextChapterId: "8",
              data: { action: "거미와 전투" },
            },
            {
              text: "거미를 피해 도망친다",
              nextChapterId: "8",
              data: { action: "거미 회피" },
            },
          ];
        case "다른 길 찾기":
          return [
            {
              text: "새로운 통로로 들어간다",
              nextChapterId: "8",
              data: { action: "새로운 통로 진입" },
            },
          ];
        case "우물 바닥 확인":
          return [
            {
              text: "지렁이와 싸운다",
              nextChapterId: "8",
              data: { action: "지렁이와 전투" },
            },
            {
              text: "지렁이를 피해 도망친다",
              nextChapterId: "8",
              data: { action: "지렁이 회피" },
            },
          ];
        case "우물 탈출":
          return [
            {
              text: "필사적으로 우물 위로 올라간다",
              nextChapterId: "8",
              data: { action: "우물 탈출 시도" },
            },
          ];
        case "폭발 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "길 찾기":
          return [
            {
              text: "빛나는 표지판을 따라간다",
              nextChapterId: "8",
              data: { action: "표지판 따라가기" },
            },
          ];
        case "장치 작동":
          return [
            {
              text: "새로운 통로로 들어간다",
              nextChapterId: "8",
              data: { action: "새로운 통로 진입" },
            },
            {
              text: "폭발에서 벗어난다",
              nextChapterId: "8",
              data: { action: "폭발 회피" },
            },
          ];
        case "방 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "책 끄기":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "책 버리기":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "통로 진입":
          return [
            {
              text: "늑대인간과 싸운다",
              nextChapterId: "8",
              data: { action: "늑대인간과 전투" },
            },
            {
              text: "늑대인간을 피해 도망친다",
              nextChapterId: "8",
              data: { action: "늑대인간 회피" },
            },
          ];
        case "방 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "그림자와 전투":
          return [
            {
              text: "그림자와 계속 싸운다",
              nextChapterId: "8",
              data: { action: "그림자와 전투 지속" },
            },
            {
              text: "그림자를 피해 도망친다",
              nextChapterId: "8",
              data: { action: "그림자 회피" },
            },
          ];
        case "동굴 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "붉은 물 조사":
          return [
            {
              text: "해독제를 찾는다",
              nextChapterId: "8",
              data: { action: "해독제 찾기" },
            },
            {
              text: "개울에서 멀어진다",
              nextChapterId: "8",
              data: { action: "개울 회피" },
            },
          ];
        case "개울 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "폭발 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "정체 확인":
          return [
            {
              text: "수호자와 싸운다",
              nextChapterId: "8",
              data: { action: "수호자와 전투" },
            },
            {
              text: "수호자를 피해 도망친다",
              nextChapterId: "8",
              data: { action: "수호자 회피" },
            },
          ];
        case "숲 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "표지판 찾기":
          return [
            {
              text: "표지판의 흔적을 따라간다",
              nextChapterId: "8",
              data: { action: "표지판 추적" },
            },
          ];
        case "여인 찾기":
          return [
            {
              text: "여인의 흔적을 따라간다",
              nextChapterId: "8",
              data: { action: "여인 추적" },
            },
          ];
        case "여인 정체 질문":
          return [
            {
              text: "수호자와 싸운다",
              nextChapterId: "8",
              data: { action: "수호자와 전투" },
            },
            {
              text: "수호자를 피해 도망친다",
              nextChapterId: "8",
              data: { action: "수호자 회피" },
            },
          ];
        case "돌 힘 거부":
          return [
            {
              text: "돌과 싸운다",
              nextChapterId: "8",
              data: { action: "돌과 전투" },
            },
          ];
        case "돌 피하기":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter8() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "길 찾기":
          return "당신은 숲에서 길을 찾기 위해 노력합니다. 숲은 여전히 묘한 기운이 감돌고, 길을 찾기가 쉽지 않습니다. 그러다, 당신은 숲 속에서 희미하게 빛나는 무언가를 발견합니다. 그것은 아발론으로 향하는 길을 알려주는 표지판처럼 보입니다. 하지만, 숲의 기운은 점점 더 강해지고 있습니다.";
        case "거미와 전투":
          return "당신은 거대한 거미와 싸우기로 결심합니다. 거미는 맹렬하게 공격해 오고, 당신은 위험에 처합니다. 거미와의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 거미를 물리쳤지만, 당신은 큰 부상을 입었습니다.";
        case "거미 회피":
          return "당신은 거대한 거미와의 싸움을 피하고 도망치기로 결심합니다. 거미는 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 거미를 따돌렸지만, 당신은 길을 잃은 것 같습니다.";
        case "새로운 통로 진입":
          return "당신은 새로운 통로로 들어가기로 결심합니다. 통로는 어둡고 좁으며, 알 수 없는 소리가 들려옵니다. 통로를 따라 걷던 중, 당신은 함정에 빠집니다! 당신은 날카로운 가시가 돋친 구덩이에 빠져 버렸습니다.";
        case "지렁이와 전투":
          return "당신은 거대한 지렁이와 싸우기로 결심합니다. 지렁이는 맹렬하게 공격해 오고, 당신은 위험에 처합니다. 지렁이와의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 지렁이를 물리쳤지만, 당신은 큰 부상을 입었습니다.";
        case "지렁이 회피":
          return "당신은 거대한 지렁이와의 싸움을 피하고 도망치기로 결심합니다. 지렁이는 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 지렁이를 따돌렸지만, 당신은 길을 잃은 것 같습니다.";
        case "우물 탈출 시도":
          return "당신은 필사적으로 우물 위로 올라가기 위해 노력합니다. 밧줄은 점점 더 끊어지고, 당신은 추락할 위기에 처합니다. 당신의 생존이 걸린 탈출입니다. 간신히 우물 밖으로 탈출했지만, 당신은 큰 부상을 입었습니다.";
        case "표지판 따라가기":
          return "당신은 빛나는 표지판을 따라가기로 결심합니다. 표지판은 숲 속 깊은 곳으로 이어져 있습니다. 표지판을 따라 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 하지만, 표지판이 갑자기 사라집니다! 당신은 길을 잃은 것 같습니다.";
        case "폭발 회피":
          return "당신은 폭발에서 벗어나기 위해 필사적으로 도망칩니다. 폭발은 당신을 덮치지 않았지만, 당신은 큰 충격을 받았습니다. 당신은 숲 속에서 길을 잃은 것 같습니다. 숲의 기운은 점점 더 강해지고 있습니다.";
        case "늑대인간과 전투":
          return "당신은 늑대인간과 싸우기로 결심합니다. 늑대인간은 맹렬하게 공격해 오고, 당신은 위험에 처합니다. 늑대인간과의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 늑대인간을 물리쳤지만, 당신은 큰 부상을 입었습니다.";
        case "늑대인간 회피":
          return "당신은 늑대인간과의 싸움을 피하고 도망치기로 결심합니다. 늑대인간은 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 늑대인간을 따돌렸지만, 당신은 길을 잃은 것 같습니다.";
        case "그림자와 전투 지속":
          return "당신은 그림자와 계속 싸우기로 결심합니다. 그림자는 강력한 힘을 가지고 있고, 당신은 위험에 처합니다. 그림자와의 전투는 더욱 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 그림자를 물리쳤지만, 당신은 큰 부상을 입었습니다.";
        case "그림자 회피":
          return "당신은 그림자와의 싸움을 포기하고, 그림자를 피해 도망치기로 합니다. 그림자는 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 그림자를 따돌렸지만, 당신은 길을 잃은 것 같습니다.";
        case "해독제 찾기":
          return "당신은 해독제를 찾기 위해 노력합니다. 숲 속을 헤매던 중, 당신은 해독제의 재료로 쓰이는 희귀한 약초를 발견합니다. 약초를 구하여 해독제를 만들기로 합니다. 하지만, 약초를 지키는 몬스터가 나타납니다!";
        case "개울 회피":
          return "당신은 개울에서 멀어지기로 결심합니다. 개울에서 벗어난 당신은 숲 속에서 길을 잃은 것 같습니다. 숲은 여전히 묘한 기운이 감돌고 있습니다.";
        case "수호자와 전투":
          return "당신은 숲의 수호자와 싸우기로 결심합니다. 수호자는 맹렬하게 공격해 오고, 당신은 위험에 처합니다. 수호자와의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 수호자를 물리쳤지만, 당신은 큰 부상을 입었습니다.";
        case "수호자 회피":
          return "당신은 숲의 수호자와의 싸움을 피하고 도망치기로 결심합니다. 수호자는 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 수호자를 따돌렸지만, 당신은 길을 잃은 것 같습니다.";
        case "표지판 추적":
          return "당신은 표지판의 흔적을 따라가기로 결심합니다. 표지판의 흔적은 숲 속 깊은 곳으로 이어져 있습니다. 표지판의 흔적을 따라 걷던 중, 당신은 아발론으로 향하는 길을 발견합니다. 길은 험난해 보입니다. 하지만, 숲의 기운은 점점 더 강해지고 있습니다.";
        case "여인 추적":
          return "당신은 여인의 흔적을 따라가기로 결심합니다. 여인의 흔적은 숲 속 깊은 곳으로 이어져 있습니다. 여인의 흔적을 따라 걷던 중, 당신은 여인을 다시 만납니다. 하지만, 여인의 모습은 이전과 다릅니다. 그녀는 차가운 눈빛으로 당신을 바라봅니다.";
        case "돌과 전투":
          return "당신은 돌과 싸우기로 결심합니다. 돌은 맹렬하게 공격해 오고, 당신은 위험에 처합니다. 돌과의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 돌을 물리쳤지만, 당신은 큰 부상을 입었습니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "길 찾기":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "9",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "숲을 더 탐험한다",
              nextChapterId: "9",
              data: { action: "숲 탐험" },
            },
          ];
        case "거미와 전투":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "거미 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "새로운 통로 진입":
          return [
            {
              text: "함정에서 탈출한다",
              nextChapterId: "9",
              data: { action: "함정 탈출" },
            },
          ];
        case "지렁이와 전투":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "지렁이 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "우물 탈출 시도":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "표지판 따라가기":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "폭발 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "늑대인간과 전투":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "늑대인간 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "그림자와 전투 지속":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "그림자 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "해독제 찾기":
          return [
            {
              text: "몬스터와 싸운다",
              nextChapterId: "9",
              data: { action: "몬스터와 전투" },
            },
            {
              text: "몬스터를 피해 도망친다",
              nextChapterId: "9",
              data: { action: "몬스터 회피" },
            },
          ];
        case "개울 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "수호자와 전투":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "수호자 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        case "표지판 추적":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "9",
              data: { action: "표지판 따라가기" },
            },
          ];
        case "여인 추적":
          return [
            {
              text: "여인과 대화한다",
              nextChapterId: "9",
              data: { action: "여인과 대화" },
            },
          ];
        case "돌과 전투":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "9",
              data: { action: "길 찾기" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter9() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "표지판 따라가기":
          return "당신은 표지판을 따라가기로 결심합니다. 표지판은 숲 속 깊은 곳으로 이어져 있습니다. 표지판을 따라 걷던 중, 당신은 마침내 아발론의 입구에 도착합니다. 아발론은 거대한 문으로 봉인되어 있습니다. 문은 신비로운 문양으로 뒤덮여 있습니다. 하지만, 문 앞에는 강력한 마법진이 쳐져 있습니다!";
        case "숲 탐험":
          return "당신은 숲을 더 탐험하기로 결심합니다. 숲 속을 헤매던 중, 당신은 낡은 제단을 발견합니다. 제단 위에는 고대의 유물이 놓여 있습니다. 유물은 신비로운 빛을 발하고 있습니다. 유물에서 강력한 기운이 느껴집니다.";
        case "길 찾기":
          return "당신은 숲에서 길을 찾기 위해 노력합니다. 숲은 여전히 묘한 기운이 감돌고, 길을 찾기가 쉽지 않습니다. 그러다, 당신은 숲 속에서 희미하게 빛나는 무언가를 발견합니다. 그것은 아발론으로 향하는 길을 알려주는 표지판처럼 보입니다. 하지만, 숲의 기운은 점점 더 강해지고 있습니다.";
        case "함정 탈출":
          return "당신은 함정에서 탈출하기 위해 필사적으로 노력합니다. 날카로운 가시가 당신을 위협하고, 당신은 큰 부상을 입을 위험에 처합니다. 당신의 생존이 걸린 탈출입니다. 간신히 함정에서 탈출했지만, 당신은 큰 부상을 입었습니다.";
        case "몬스터와 전투":
          return "당신은 약초를 지키는 몬스터와 싸우기로 결심합니다. 몬스터는 맹렬하게 공격해 오고, 당신은 위험에 처합니다. 몬스터와의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 몬스터를 물리쳤지만, 당신은 큰 부상을 입었습니다. 그리고 해독제를 만들었습니다.";
        case "몬스터 회피":
          return "당신은 몬스터와의 싸움을 피하고 도망치기로 결심합니다. 몬스터는 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 몬스터를 따돌렸지만, 당신은 해독제를 얻지 못했습니다.";
        case "여인과 대화":
          return "당신은 여인과 대화하기로 결심합니다. 여인은 차가운 눈빛으로 당신을 바라보며, 자신의 정체를 밝힙니다. 그녀는 아발론의 수호자였습니다! 수호자는 당신을 공격하려 합니다. 그녀는 당신을 시험하기 위해 여인의 모습으로 나타났던 것입니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "표지판 따라가기":
          return [
            {
              text: "마법진을 해제한다",
              nextChapterId: "10",
              data: { action: "마법진 해제" },
            },
            {
              text: "문을 부순다",
              nextChapterId: "10",
              data: { action: "문 부수기" },
            },
          ];
        case "숲 탐험":
          return [
            {
              text: "유물을 가져간다",
              nextChapterId: "10",
              data: { action: "유물 획득" },
            },
            {
              text: "제단을 조사한다",
              nextChapterId: "10",
              data: { action: "제단 조사" },
            },
          ];
        case "길 찾기":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "10",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "숲을 더 탐험한다",
              nextChapterId: "10",
              data: { action: "숲 탐험" },
            },
          ];
        case "함정 탈출":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "10",
              data: { action: "길 찾기" },
            },
          ];
        case "몬스터와 전투":
          return [
            {
              text: "해독제를 사용한다",
              nextChapterId: "10",
              data: { action: "해독제 사용" },
            },
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "10",
              data: { action: "길 찾기" },
            },
          ];
        case "몬스터 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "10",
              data: { action: "길 찾기" },
            },
          ];
        case "여인과 대화":
          return [
            {
              text: "수호자와 싸운다",
              nextChapterId: "10",
              data: { action: "수호자와 전투" },
            },
            {
              text: "수호자를 피해 도망친다",
              nextChapterId: "10",
              data: { action: "수호자 회피" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter10() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "마법진 해제":
          return "당신은 아발론의 문 앞에 쳐진 마법진을 해제하기로 결심합니다. 마법진은 매우 강력해 보입니다. 당신은 가진 지식과 아이템을 활용하여 마법진을 해제하기 위해 노력합니다. 마법진을 해제하는 데 성공했지만, 당신은 큰 에너지를 소모했습니다. 아발론의 문이 열립니다!";
        case "문 부수기":
          return "당신은 아발론의 문을 부수기로 결심합니다. 문은 매우 단단해 보입니다. 당신은 가진 힘을 모두 사용하여 문을 부수기 위해 노력합니다. 하지만, 문은 꿈쩍도 하지 않습니다. 오히려, 문에서 강력한 에너지가 방출되어 당신을 공격합니다!";
        case "유물 획득":
          return "당신은 제단 위의 유물을 가져가기로 결심합니다. 유물을 손에 쥐는 순간, 강력한 에너지가 당신을 감쌉니다. 유물은 당신에게 특별한 힘을 부여하는 듯합니다. 하지만, 동시에 숲이 흔들리기 시작합니다. 숲은 불안정하게 흔들립니다. 유물은 당신에게 위험한 힘을 준 것 같습니다.";
        case "제단 조사":
          return "당신은 제단을 조사하기로 결심합니다. 제단에는 고대의 문자가 새겨져 있습니다. 문자를 해독하던 중, 당신은 아발론에 대한 중요한 정보를 얻게 됩니다. 하지만, 동시에 숲이 흔들리기 시작합니다. 숲은 불안정하게 흔들립니다.";
        case "표지판 따라가기":
          return "당신은 표지판을 따라가기로 결심합니다. 표지판은 숲 속 깊은 곳으로 이어져 있습니다. 표지판을 따라 걷던 중, 당신은 마침내 아발론의 입구에 도착합니다. 아발론은 거대한 문으로 봉인되어 있습니다. 문은 신비로운 문양으로 뒤덮여 있습니다. 하지만, 문 앞에는 강력한 마법진이 쳐져 있습니다!";
        case "숲 탐험":
          return "당신은 숲을 더 탐험하기로 결심합니다. 숲 속을 헤매던 중, 당신은 낡은 제단을 발견합니다. 제단 위에는 고대의 유물이 놓여 있습니다. 유물은 신비로운 빛을 발하고 있습니다. 유물에서 강력한 기운이 느껴집니다.";
        case "길 찾기":
          return "당신은 숲에서 길을 찾기 위해 노력합니다. 숲은 여전히 묘한 기운이 감돌고, 길을 찾기가 쉽지 않습니다. 그러다, 당신은 숲 속에서 희미하게 빛나는 무언가를 발견합니다. 그것은 아발론으로 향하는 길을 알려주는 표지판처럼 보입니다. 하지만, 숲의 기운은 점점 더 강해지고 있습니다.";
        case "해독제 사용":
          return "당신은 해독제를 사용하기로 결심합니다. 해독제를 마시는 순간, 당신의 몸에서 고통이 사라집니다. 당신은 다시 건강을 되찾았습니다. 이제 다시 모험을 시작할 수 있습니다.";
        case "수호자와 전투":
          return "당신은 아발론의 수호자와 싸우기로 결심합니다. 수호자는 맹렬하게 공격해 오고, 당신은 위험에 처합니다. 수호자와의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 간신히 수호자를 물리쳤지만, 당신은 큰 부상을 입었습니다.";
        case "수호자 회피":
          return "당신은 아발론의 수호자와의 싸움을 피하고 도망치기로 결심합니다. 수호자는 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 수호자를 따돌렸지만, 당신은 길을 잃은 것 같습니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "마법진 해제":
          return [
            {
              text: "아발론으로 들어간다",
              nextChapterId: "11",
              data: { action: "아발론 진입" },
            },
          ];
        case "문 부수기":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "유물 획득":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "제단 조사":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "표지판 따라가기":
          return [
            {
              text: "마법진을 해제한다",
              nextChapterId: "11",
              data: { action: "마법진 해제" },
            },
            {
              text: "문을 부순다",
              nextChapterId: "11",
              data: { action: "문 부수기" },
            },
          ];
        case "숲 탐험":
          return [
            {
              text: "유물을 가져간다",
              nextChapterId: "11",
              data: { action: "유물 획득" },
            },
            {
              text: "제단을 조사한다",
              nextChapterId: "11",
              data: { action: "제단 조사" },
            },
          ];
        case "길 찾기":
          return [
            {
              text: "표지판을 따라간다",
              nextChapterId: "11",
              data: { action: "표지판 따라가기" },
            },
            {
              text: "숲을 더 탐험한다",
              nextChapterId: "11",
              data: { action: "숲 탐험" },
            },
          ];
        case "해독제 사용":
          return [
            {
              text: "아발론으로 향한다",
              nextChapterId: "11",
              data: { action: "아발론으로" },
            },
          ];
        case "수호자와 전투":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        case "수호자 회피":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter11() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "아발론 진입":
          return "당신은 마침내 아발론에 진입합니다. 아발론은 웅장하고 아름다운 도시입니다. 하지만, 도시는 텅 비어 있고, 묘한 기운이 감돌고 있습니다. 당신은 아발론의 중심부로 향합니다. 그곳에서 당신은 거대한 제단을 발견합니다. 제단 위에는 빛나는 보석이 놓여 있습니다. 보석은 강력한 에너지를 발산하고 있습니다. 당신은 보석을 향해 다가갑니다. 하지만, 보석을 지키는 수호자가 나타납니다!";
        case "유물 획득":
          return "당신은 유물을 획득합니다. 유물은 강력한 힘을 가지고 있습니다. 당신은 유물의 힘을 사용하여 아발론으로 향합니다. 아발론은 웅장하고 아름다운 도시입니다. 하지만, 도시는 텅 비어 있고, 묘한 기운이 감돌고 있습니다. 당신은 아발론의 중심부로 향합니다. 그곳에서 당신은 거대한 제단을 발견합니다. 제단 위에는 빛나는 보석이 놓여 있습니다. 보석은 강력한 에너지를 발산하고 있습니다. 당신은 보석을 향해 다가갑니다. 하지만, 보석을 지키는 수호자가 나타납니다!";
        case "제단 조사":
          return "당신은 제단을 조사합니다. 제단에는 고대의 문자가 새겨져 있습니다. 문자를 해독하던 중, 당신은 아발론의 진실을 알게 됩니다. 아발론은 강력한 힘의 원천이었지만, 그 힘을 감당하지 못해 멸망한 도시였습니다. 당신은 아발론의 중심부로 향합니다. 그곳에서 당신은 거대한 제단을 발견합니다. 제단 위에는 빛나는 보석이 놓여 있습니다. 보석은 강력한 에너지를 발산하고 있습니다. 당신은 보석을 향해 다가갑니다. 하지만, 보석을 지키는 수호자가 나타납니다!";
        case "아발론으로":
          return "당신은 해독제를 사용하여 건강을 되찾고 아발론으로 향합니다. 아발론은 웅장하고 아름다운 도시입니다. 하지만, 도시는 텅 비어 있고, 묘한 기운이 감돌고 있습니다. 당신은 아발론의 중심부로 향합니다. 그곳에서 당신은 거대한 제단을 발견합니다. 제단 위에는 빛나는 보석이 놓여 있습니다. 보석은 강력한 에너지를 발산하고 있습니다. 당신은 보석을 향해 다가갑니다. 하지만, 보석을 지키는 수호자가 나타납니다!";
        case "마법진 해제":
          return "당신은 마법진을 해제하고 아발론으로 향합니다. 아발론은 웅장하고 아름다운 도시입니다. 하지만, 도시는 텅 비어 있고, 묘한 기운이 감돌고 있습니다. 당신은 아발론의 중심부로 향합니다. 그곳에서 당신은 거대한 제단을 발견합니다. 제단 위에는 빛나는 보석이 놓여 있습니다. 보석은 강력한 에너지를 발산하고 있습니다. 당신은 보석을 향해 다가갑니다. 하지만, 보석을 지키는 수호자가 나타납니다!";
        case "문 부수기":
          return "당신은 문을 부수려다 실패하고, 숲에서 길을 잃었습니다. 당신은 다시 아발론으로 향하는 길을 찾아야 합니다.";
        case "길 찾기":
          return "당신은 숲에서 길을 찾기 위해 노력합니다. 숲은 여전히 묘한 기운이 감돌고, 길을 찾기가 쉽지 않습니다. 그러다, 당신은 숲 속에서 희미하게 빛나는 무언가를 발견합니다. 그것은 아발론으로 향하는 길을 알려주는 표지판처럼 보입니다. 하지만, 숲의 기운은 점점 더 강해지고 있습니다.";
        case "숲 탐험":
          return "당신은 숲을 더 탐험하기로 결심합니다. 숲 속을 헤매던 중, 당신은 낡은 제단을 발견합니다. 제단 위에는 고대의 유물이 놓여 있습니다. 유물은 신비로운 빛을 발하고 있습니다. 유물에서 강력한 기운이 느껴집니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "아발론 진입":
        case "유물 획득":
        case "제단 조사":
        case "아발론으로":
        case "마법진 해제":
          return [
            {
              text: "수호자와 싸운다",
              nextChapterId: "12",
              data: { action: "수호자와 전투" },
            },
            {
              text: "수호자를 피해 도망친다",
              nextChapterId: "12",
              data: { action: "수호자 회피" },
            },
          ];
        case "문 부수기":
        case "길 찾기":
        case "숲 탐험":
          return [
            {
              text: "숲에서 길을 찾는다",
              nextChapterId: "8",
              data: { action: "길 찾기" },
            },
          ];
        default:
          return [];
      }
    },
  };
}

function getChapter12() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "수호자와 전투":
          if (inventory.includes("빛나는 보석")) {
            return "당신은 보석을 지키는 수호자와 싸우기로 결심합니다. 수호자는 강력한 힘을 가지고 있고, 당신은 위험에 처합니다. 수호자와의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 하지만 당신은 빛나는 보석의 힘을 사용하여 수호자를 물리칩니다! 수호자는 쓰러지고, 당신은 보석을 얻게 됩니다. 아발론의 힘을 손에 넣은 당신은 세계를 구할 수도, 파괴할 수도 있습니다. 당신은 어떤 선택을 하시겠습니까?";
          } else {
            gameEnded = true;
            return "당신은 보석을 지키는 수호자와 싸우기로 결심합니다. 수호자는 강력한 힘을 가지고 있고, 당신은 위험에 처합니다. 수호자와의 전투는 치열하게 전개됩니다. 당신의 생존이 걸린 싸움입니다. 당신은 모든 힘을 다해 싸웠지만, 결국 수호자에게 패배했습니다. 당신의 모험은 여기서 끝이 납니다.";
          }
        case "수호자 회피":
          gameEnded = true;
          return "당신은 보석을 지키는 수호자와의 싸움을 피하고 도망치기로 결심합니다. 수호자는 맹렬하게 당신을 쫓아오고, 당신은 필사적으로 도망칩니다. 당신의 생존이 걸린 도망입니다. 간신히 수호자를 따돌렸지만, 당신은 아발론에서 길을 잃었습니다. 당신은 아발론의 보석을 얻지 못하고, 숲으로 돌아가야 합니다. 당신의 모험은 여기서 끝이 납니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      switch (data.action) {
        case "수호자와 전투":
          if (inventory.includes("빛나는 보석")) {
            return [
              {
                text: "보석의 힘으로 세계를 구한다",
                nextChapterId: "13",
                data: { action: "세계 구원" },
              },
              {
                text: "보석의 힘으로 세계를 파괴한다",
                nextChapterId: "13",
                data: { action: "세계 파괴" },
              },
              {
                text: "보석을 제자리에 돌려놓는다",
                nextChapterId: "13",
                data: { action: "보석 반환" },
              },
            ];
          } else {
            return [];
          }
        case "수호자 회피":
          return [];
        default:
          return [];
      }
    },
  };
}

function getChapter13() {
  return {
    dynamicText: (data) => {
      switch (data.action) {
        case "세계 구원":
          gameEnded = true;
          return "당신은 보석의 힘을 사용하여 세계를 구하기로 결심합니다. 보석의 빛이 온 세상을 감싸고, 어둠은 사라집니다. 당신은 영웅으로 칭송받으며, 세계는 평화를 되찾습니다. 당신의 모험은 위대한 결말로 끝이 납니다.";
        case "세계 파괴":
          gameEnded = true;
          return "당신은 보석의 힘을 사용하여 세계를 파괴하기로 결심합니다. 보석의 어두운 기운이 온 세상을 뒤덮고, 모든 것이 파괴됩니다. 당신은 파괴자의 왕으로 군림하며, 세계는 멸망합니다. 당신의 모험은 비극적인 결말로 끝이 납니다.";
        case "보석 반환":
          gameEnded = true;
          return "당신은 보석을 제자리에 돌려놓기로 결심합니다. 보석은 다시 제단 위에서 빛나고, 아발론은 다시 잠듭니다. 당신은 아발론의 비밀을 지키는 자가 되어, 숲을 떠납니다. 당신의 모험은 조용한 결말로 끝이 납니다.";
        default:
          return "잘못된 선택입니다. 게임을 다시 시작합니다.";
      }
    },
    dynamicOptions: (data) => {
      endGame("게임이 종료되었습니다. 당신의 선택은 여기까지입니다.");
      return [];
    },
  };
}

function getChapterMinus1() {
  return {
    text: "게임이 종료되었습니다. 당신의 선택은 여기까지입니다.",
    options: [],
  };
}

const chaptersData = {};
for (const key in window) {
  if (key.startsWith("getChapter")) {
    const chapterId = key.substring("getChapter".length);
    if (typeof window[key] === "function") {
      chaptersData[chapterId] = window[key];
    }
  }
}

const chapters = {};
for (const chapterId in chaptersData) {
  const dataFunction = chaptersData[chapterId];
  const data = dataFunction();
  chapters[chapterId] = new Chapter(data);
  if (data.dynamicOptions) {
    chapters[chapterId].dynamicOptions = data.dynamicOptions;
  }
  if (data.dynamicText) {
    chapters[chapterId].dynamicText = data.dynamicText;
  }
  if (data.options) {
    chapters[chapterId].options = data.options.map(
      (optionData) =>
        new Option(optionData.text, optionData.nextChapterId, optionData.data)
    );
  }
}

function chooseOption(optionIndex) {
  if (gameEnded) return;

  const chapter = chapters[currentChapterId];
  const selectedOption = chapter.getDisplayOptions(previousOption)[optionIndex];

  if (selectedOption) {
    const nextChapterId = selectedOption.nextChapterId;
    if (chapters[nextChapterId]) {
      previousOption = selectedOption;
      currentChapterId = nextChapterId;
      renderChapter(selectedOption);
    } else {
      endGame("잘못된 챕터로 이동하려고 합니다. 게임을 종료합니다.");
    }
  } else {
    endGame("잘못된 선택입니다. 게임을 다시 시작합니다.");
  }
}

function endGame(message) {
  gameEnded = true;
  storyElement.textContent = message;
  choicesElement.innerHTML = `<button class="restart-button" onclick="restartGame()">다시 시작하기</button>`;
}

function renderChapter(selectedOption) {
  const chapter = chapters[currentChapterId];
  if (!chapter) {
    endGame("챕터가 존재하지 않습니다. 게임을 종료합니다.");
    return;
  }

  const text = chapter.getDisplayText(selectedOption);
  const options = chapter.getDisplayOptions(selectedOption);

  storyElement.textContent = text;
  if (gameEnded) {
    choicesElement.innerHTML = `<button class="restart-button" onclick="restartGame()">다시 시작하기</button>`;
  } else {
    choicesElement.innerHTML = options
      .map(
        (option, index) =>
          `<button onclick="chooseOption(${index})">${option.text}</button>`
      )
      .join("");
  }
}

function startGame() {
  gameEnded = false;
  currentChapterId = "0";
  previousOption = null;
  renderChapter();
}

function restartGame() {
  startGame();
}

startGame();
